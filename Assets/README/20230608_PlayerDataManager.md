# PlayerDataManager

---

> ## 💿 1. 기존 데이터의 문제점
### 1. 클래스로 이루어져 있다
참조형식 데이터면서 데이터 자체가 무언가 하는것이 없는데도 클래스로 이뤄져있다는것은
굳이 Heap에 넣어서 가비지의 대상이 된다는것은 좀 아쉬운 일이다.
그리고 clone이라는 함수를 만들게 되는데 구조체를 도입하면 해결이 쉽다.

```
그래서 구조체(struct)로 만들자

> 1. Clone함수 없에도 됨
> 2. 생성자 사용 가능 Maybe
> 3. 연산자 오버로딩 가능 
``` 

### 2. 데이터의 오염이 될 여지가 매우 높다.
자주 바뀌는 데이터와 자주 안바뀌는 데이터가 일단 뭉쳐져 있다.
그리고 사칙연산의 순서에 따라 올바르지 않은 데이터 변경이 있다.

```
따라서 Data를 Manage하는 컴포넌트를 만들자

> 1. 데이터 사칙연산순서에 따른 데이터 오염 걱정을 안해도 된다.
> 2. 구조체를 참조형으로 사용해서 원본 데이터를 최대한 변형 안하고. Base 연산과 After데이터 연산을 다루기도 쉽다
> 3. 궁극적으로 Carrier에 의한 후보정 데이터를 다루는데 있어서 친화적이다.
> 4. Readonly 데이터를 만들고, 자주 바뀌는 데이터 같은 경우 그냥 그 컴포넌트의 내부 스코프 멤버를 만듬으로 다루는것으로 하자.
```

---

> ## 2. 💿 특징
1. 데이터의 총 결과물이 담겨 있다. 데이터 수정은 오직 이녀석이 주도한다. 이녀석을 거치지 않고 데이터를 직접 수정하는 일은 없어야 한다.
2. 이녀석을 구성하는 컴포지트들은 모두 Readonly로 해야된다.
3. 정적 : (PlayerData + EquipmentData)  * 동적 : (Base를 기준으로 합산buffQueue)
4. 이놈이 모두다 뿌려줄 능력이 된다. Static으로 하게 된다면 어떨까?

---

> ## 3. 💿 장점
---

> ## 4. 💿 과제
1. GetEntityData에선 플레이어가 이걸 참조하게끔 하면 된다.
2. 사실 궁극적으로 스킬 친화적인 시스템을 구축하기 위해서 만들어야 한다.
3. 데이터 매니져는 각자 매니저에서 일어난 이벤트를 구독해야한다.
    * 무기 : WeaponChanged
    * 스킬 : SkillChangeded
    * Equipment : Dump Equip
4. 따하서 PDM을 만들게 된다면 모든 데이터는 다 PDM을 참조하고 나머지 PDM을 사용 안하는 데이터 조작은 전부 삭제한다.


---